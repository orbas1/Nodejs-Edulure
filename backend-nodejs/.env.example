NODE_ENV=development
PORT=4000
APP_NAME=Edulure
APP_URL=http://localhost:5173
CORS_ALLOWED_ORIGINS=http://localhost:5173
# Provide either JWT_KEYSET/JWT_ACTIVE_KEY_ID (preferred) or JWT_SECRET for legacy setups
JWT_KEYSET=
JWT_ACTIVE_KEY_ID=
JWT_SECRET=change-me-super-secret-please-rotate
JWT_REFRESH_SECRET=change-me-refresh-secret-please-rotate
JWT_AUDIENCE=api.edulure.com
JWT_ISSUER=edulure-platform
TOKEN_EXPIRY_MINUTES=120
REFRESH_TOKEN_EXPIRY_DAYS=30
DB_HOST=localhost
DB_PORT=3306
DB_USER=edulure_local
DB_PASSWORD=super-secure-password
DB_NAME=edulure
DB_ROOT_USER=root
DB_ROOT_PASSWORD=changeme
DB_PROVISION_USER=true
DB_USER_HOST=%
RATE_LIMIT_WINDOW_MINUTES=15
RATE_LIMIT_MAX=300
LOG_LEVEL=info
LOG_SERVICE_NAME=edulure-api
LOG_REDACTED_FIELDS=req.body.ssn,req.body.pin
TRACE_HEADER_NAME=x-request-id
TRACING_SAMPLE_RATE=0.25
METRICS_ENABLED=true
METRICS_USERNAME=
METRICS_PASSWORD=
METRICS_BEARER_TOKEN=
METRICS_ALLOWED_IPS=127.0.0.1/32,::1
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret
R2_REGION=auto
R2_PUBLIC_BUCKET=edulure-public
R2_PRIVATE_BUCKET=edulure-private
R2_UPLOADS_BUCKET=edulure-uploads
R2_QUARANTINE_BUCKET=edulure-quarantine
R2_CDN_URL=https://cdn.edulure.com
ASSET_PRESIGN_TTL_MINUTES=15
ASSET_DOWNLOAD_TTL_MINUTES=60
CONTENT_MAX_UPLOAD_MB=512
CLOUDCONVERT_API_KEY=your-cloudconvert-api-key
CLOUDCONVERT_SANDBOX_API_KEY=
CLOUDCONVERT_BASE_URL=https://api.cloudconvert.com/v2
CLOUDCONVERT_SANDBOX_MODE=false
CLOUDCONVERT_TIMEOUT_MS=15000
CLOUDCONVERT_RETRY_ATTEMPTS=3
CLOUDCONVERT_RETRY_BASE_DELAY_MS=500
CLOUDCONVERT_CIRCUIT_BREAKER_THRESHOLD=6
CLOUDCONVERT_CIRCUIT_BREAKER_COOLDOWN_SECONDS=180
DRM_DOWNLOAD_LIMIT=3
DRM_SIGNATURE_SECRET=
STRIPE_MODE=test
STRIPE_SECRET_KEY=sk_test_change_me
STRIPE_PUBLISHABLE_KEY=pk_test_change_me
STRIPE_WEBHOOK_SECRET=whsec_change_me
STRIPE_SANDBOX_SECRET_KEY=sk_test_change_me
STRIPE_SANDBOX_PUBLISHABLE_KEY=pk_test_change_me
STRIPE_SANDBOX_WEBHOOK_SECRET=whsec_change_me
STRIPE_RETRY_ATTEMPTS=3
STRIPE_RETRY_BASE_DELAY_MS=250
STRIPE_CIRCUIT_BREAKER_THRESHOLD=8
STRIPE_CIRCUIT_BREAKER_COOLDOWN_SECONDS=180
STRIPE_WEBHOOK_DEDUPE_TTL_SECONDS=86400
STRIPE_WEBHOOK_MAX_SKEW_SECONDS=1800
STRIPE_STATEMENT_DESCRIPTOR="EDULURE LEARNING"
ESCROW_API_KEY=
ESCROW_API_SECRET=
ESCROW_BASE_URL=https://api.escrow.com/2017-09-01
ESCROW_WEBHOOK_SECRET=
PAYPAL_ENVIRONMENT=sandbox
PAYPAL_CLIENT_ID=paypal-sandbox-client-id
PAYPAL_CLIENT_SECRET=paypal-sandbox-client-secret
PAYPAL_SANDBOX_CLIENT_ID=paypal-sandbox-client-id
PAYPAL_SANDBOX_CLIENT_SECRET=paypal-sandbox-client-secret
PAYPAL_RETRY_ATTEMPTS=3
PAYPAL_RETRY_BASE_DELAY_MS=400
PAYPAL_CIRCUIT_BREAKER_THRESHOLD=6
PAYPAL_CIRCUIT_BREAKER_COOLDOWN_SECONDS=240
PAYPAL_WEBHOOK_DEDUPE_TTL_SECONDS=86400
PAYPAL_WEBHOOK_MAX_SKEW_SECONDS=3600
PAYPAL_WEBHOOK_ID=
PAYMENTS_DEFAULT_CURRENCY=USD
PAYMENTS_ALLOWED_CURRENCIES=USD,EUR,GBP
# JSON string mapping tax rates, e.g. {"US":{"defaultRate":0.07,"regions":{"CA":0.0825}},"GB":{"defaultRate":0.2}}
PAYMENTS_TAX_TABLE={"US":{"defaultRate":0.07},"GB":{"defaultRate":0.2}}
PAYMENTS_TAX_INCLUSIVE=false
PAYMENTS_MINIMUM_TAX_RATE=0.00
PAYMENTS_MAX_COUPON_PERCENTAGE=80
PAYMENTS_REPORTING_TIMEZONE=Etc/UTC
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=security@edulure.com
SMTP_FROM_NAME="Edulure Security"
EMAIL_VERIFICATION_URL=https://app.edulure.com/auth/verify-email
EMAIL_VERIFICATION_TOKEN_TTL_MINUTES=60
EMAIL_VERIFICATION_RESEND_COOLDOWN_MINUTES=15
# Public link used in integration credential invite emails. Defaults to EMAIL_VERIFICATION_URL when unset.
INTEGRATION_KEY_INVITE_BASE_URL=https://ops.edulure.com
# Lifetime (hours) for each credential invite token before expiry.
INTEGRATION_KEY_INVITE_TTL_HOURS=72
ACCOUNT_LOCKOUT_THRESHOLD=5
ACCOUNT_LOCKOUT_WINDOW_MINUTES=15
ACCOUNT_LOCKOUT_DURATION_MINUTES=30
DATA_RETENTION_ENABLED=true
DATA_RETENTION_CRON=0 3 * * *
DATA_RETENTION_TIMEZONE=Etc/UTC
DATA_RETENTION_DRY_RUN=false
DATA_RETENTION_RUN_ON_STARTUP=false
DATA_RETENTION_MAX_FAILURES=3
DATA_RETENTION_FAILURE_BACKOFF_MINUTES=30
DOMAIN_EVENTS_DISPATCH_ENABLED=true
DOMAIN_EVENTS_DISPATCH_POLL_INTERVAL_MS=2000
DOMAIN_EVENTS_DISPATCH_BATCH_SIZE=50
DOMAIN_EVENTS_DISPATCH_MAX_ATTEMPTS=8
DOMAIN_EVENTS_DISPATCH_INITIAL_BACKOFF_SECONDS=30
DOMAIN_EVENTS_DISPATCH_MAX_BACKOFF_SECONDS=900
DOMAIN_EVENTS_DISPATCH_BACKOFF_MULTIPLIER=2
DOMAIN_EVENTS_DISPATCH_JITTER_RATIO=0.15
DOMAIN_EVENTS_DISPATCH_RECOVER_INTERVAL_MS=60000
DOMAIN_EVENTS_DISPATCH_RECOVER_TIMEOUT_MINUTES=10

# Telemetry pipeline
TELEMETRY_INGESTION_ENABLED=true
TELEMETRY_ALLOWED_SOURCES=web,backend,worker
TELEMETRY_STRICT_SOURCE_ENFORCEMENT=false
TELEMETRY_DEFAULT_SCOPE=product.analytics
TELEMETRY_CONSENT_DEFAULT_VERSION=v1
TELEMETRY_CONSENT_HARD_BLOCK=true
TELEMETRY_EXPORT_ENABLED=true
TELEMETRY_EXPORT_DESTINATION=s3
TELEMETRY_EXPORT_BUCKET=edulure-telemetry
TELEMETRY_EXPORT_PREFIX=warehouse/telemetry
TELEMETRY_EXPORT_BATCH_SIZE=5000
TELEMETRY_EXPORT_COMPRESS=true
TELEMETRY_EXPORT_RUN_ON_STARTUP=true
TELEMETRY_EXPORT_CRON=*/10 * * * *
TELEMETRY_EXPORT_TIMEZONE=Etc/UTC
TELEMETRY_FRESHNESS_INGESTION_THRESHOLD_MINUTES=15
TELEMETRY_FRESHNESS_WAREHOUSE_THRESHOLD_MINUTES=30
TELEMETRY_LINEAGE_TOOL=dbt
TELEMETRY_LINEAGE_AUTO_RECORD=true
FEATURE_FLAG_CACHE_TTL_SECONDS=30
FEATURE_FLAG_REFRESH_INTERVAL_SECONDS=120
FEATURE_FLAG_SYNC_ON_BOOT=true
FEATURE_FLAG_SYNC_ACTOR=bootstrap-automation
FEATURE_FLAG_DEFAULT_ENVIRONMENT=production
RUNTIME_CONFIG_CACHE_TTL_SECONDS=45
RUNTIME_CONFIG_REFRESH_INTERVAL_SECONDS=300
CHAT_PRESENCE_DEFAULT_TTL_MINUTES=5
CHAT_PRESENCE_MAX_TTL_MINUTES=60
CHAT_MESSAGE_DEFAULT_PAGE_SIZE=50
CHAT_MESSAGE_MAX_PAGE_SIZE=200
DM_THREAD_DEFAULT_PAGE_SIZE=20
DM_THREAD_MAX_PAGE_SIZE=100
DM_MESSAGE_DEFAULT_PAGE_SIZE=50
DM_MESSAGE_MAX_PAGE_SIZE=200
SOCIAL_FOLLOW_DEFAULT_PAGE_SIZE=25
SOCIAL_FOLLOW_MAX_PAGE_SIZE=100
SOCIAL_RECOMMENDATION_MAX_RESULTS=12
SOCIAL_RECOMMENDATION_REFRESH_MINUTES=360
SOCIAL_MUTE_DEFAULT_DURATION_DAYS=30
MEILISEARCH_HOSTS=https://meilisearch-primary.edulure.internal:7700
MEILISEARCH_REPLICA_HOSTS=https://meilisearch-replica-a.edulure.internal:7700,https://meilisearch-replica-b.edulure.internal:7700
MEILISEARCH_SEARCH_HOSTS=
MEILISEARCH_ADMIN_API_KEY=replace-with-admin-key
MEILISEARCH_SEARCH_API_KEY=replace-with-search-only-key
MEILISEARCH_HEALTHCHECK_INTERVAL_SECONDS=30
MEILISEARCH_REQUEST_TIMEOUT_MS=5000
MEILISEARCH_INDEX_PREFIX=edulure
MEILISEARCH_ALLOWED_IPS=10.0.0.0/24,192.168.0.0/24
SEARCH_INGESTION_BATCH_SIZE=500
SEARCH_INGESTION_CONCURRENCY=2
SEARCH_INGESTION_DELETE_BEFORE_REINDEX=true

TWILIO_ENVIRONMENT=sandbox
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_MESSAGING_SERVICE_SID=
TWILIO_FROM_NUMBER=
TWILIO_SANDBOX_FROM_NUMBER=+15005550006
TWILIO_RETRY_ATTEMPTS=3
TWILIO_RETRY_BASE_DELAY_MS=500
TWILIO_CIRCUIT_BREAKER_THRESHOLD=5
TWILIO_CIRCUIT_BREAKER_COOLDOWN_SECONDS=180
