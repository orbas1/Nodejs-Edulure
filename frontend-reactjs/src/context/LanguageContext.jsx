import { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react';
import PropTypes from 'prop-types';

const STORAGE_KEY = 'edulure.language';

export const SUPPORTED_LANGUAGES = Object.freeze([
  { code: 'en', label: 'English', nativeName: 'English', flag: 'üá∫üá∏', direction: 'ltr' },
  { code: 'fr', label: 'French', nativeName: 'Fran√ßais', flag: 'üá´üá∑', direction: 'ltr' },
  { code: 'es', label: 'Spanish', nativeName: 'Espa√±ol', flag: 'üá™üá∏', direction: 'ltr' },
  { code: 'pt', label: 'Portuguese', nativeName: 'Portugu√™s', flag: 'üáµüáπ', direction: 'ltr' },
  { code: 'it', label: 'Italian', nativeName: 'Italiano', flag: 'üáÆüáπ', direction: 'ltr' },
  { code: 'pl', label: 'Polish', nativeName: 'Polski', flag: 'üáµüá±', direction: 'ltr' },
  { code: 'hi', label: 'Hindi', nativeName: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä', flag: 'üáÆüá≥', direction: 'ltr' },
  { code: 'ar', label: 'Arabic', nativeName: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', flag: 'üá∏üá¶', direction: 'rtl' },
  { code: 'de', label: 'German', nativeName: 'Deutsch', flag: 'üá©üá™', direction: 'ltr' },
  { code: 'ru', label: 'Russian', nativeName: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫', direction: 'ltr' }
]);

const TRANSLATIONS = {
  en: {
    navigation: {
      login: 'Log in',
      register: 'Join the community',
      language: 'Language'
    },
    languageSelector: {
      ariaLabel: 'Change language',
      menuHelp: 'Choose the language you prefer'
    },
    home: {
      hero: {
        headline: 'Where ambitious builders learn, teach, and grow together',
        subhead:
          'Edulure is a community-first home for people obsessed with sharing skills. Swap playbooks, co-host live jams, and turn knowledge into momentum with peers who cheer you on.',
        title: 'Where ambitious builders learn, teach, and grow together',
        description:
          'Edulure is a community-first home for people obsessed with sharing skills. Swap playbooks, co-host live jams, and turn knowledge into momentum with peers who cheer you on.',
        status: 'Built for cohort-based learning',
        ctaPrimary: 'Join the community',
        ctaSecondary: 'Peek inside live circles',
        chips: {
          communities: 'Communities',
          courses: 'Courses',
          ebooks: 'E-books',
          tutors: '1:1 Tutors'
        },
        cards: {
          liveSession: {
            title: 'Live cohort jam',
            meta: 'Starts in 12 hours',
            cta: 'Set reminder'
          },
          community: {
            title: 'Community pulse',
            status: 'Live now',
            headline: 'Weekly build circle',
            subhead: 'Swap launches, feedback, and wins with peers'
          },
          resource: {
            title: 'Creator tea digest',
            meta: 'Fresh drops every Monday',
            cta: 'Read now'
          }
        },
        instructorPill: "I'm an instructor",
        illustrationAlt: 'Collage of instructors and learners collaborating'
      },
      community: {
        eyebrow: 'Community spotlight',
        heading: 'Two tracks. One buzzing campus.',
        description:
          'Pick your lane and plug into gatherings designed for momentum, cheer, and meaningful progress.',
        learners: {
          label: 'For learners',
          title: 'Find your flow, one playful sprint at a time.',
          description:
            'Join squads who learn out loud, swap experiments, and celebrate the little wins that build big confidence.',
          benefits: {
            one: 'Drop into live build labs with peers and mentors who keep things upbeat.',
            two: 'Collect project-ready templates, playlists, and prompts in one playful vault.',
            three: 'Score accountability check-ins that feel more like pep talks than homework.'
          }
        },
        instructors: {
          label: 'For instructors',
          title: 'Design experiences that feel like festivals, not lectures.',
          description:
            'Craft cohorts that pulse with curiosity, remix resources on the fly, and watch your community light up.',
          benefits: {
            one: 'Spin up vibrant cohorts with zero-fuss tooling built for experimentation.',
            two: 'Package curriculum drops, feedback loops, and analytics in one joyful HQ.',
            three: 'Spotlight wins with playful badges that keep your learners cheering.'
          }
        }
      }
    }
  },
  fr: {
    navigation: {
      login: 'Se connecter',
      register: 'Rejoindre la communaut√©',
      language: 'Langue'
    },
    languageSelector: {
      ariaLabel: 'Changer de langue',
      menuHelp: 'S√©lectionnez la langue de votre choix'
    },
    home: {
      hero: {
        headline: 'L√† o√π les b√¢tisseurs ambitieux apprennent, enseignent et grandissent ensemble',
        subhead:
          'Edulure est un foyer ax√© sur la communaut√© pour les personnes obs√©d√©es par le partage des comp√©tences. √âchangez des playbooks, co-animez des jams en direct et transformez le savoir en √©lan avec des pairs qui vous encouragent.',
        title: 'L√† o√π les b√¢tisseurs ambitieux apprennent, enseignent et grandissent ensemble',
        description:
          'Edulure est un foyer ax√© sur la communaut√© pour les personnes obs√©d√©es par le partage des comp√©tences. √âchangez des playbooks, co-animez des jams en direct et transformez le savoir en √©lan avec des pairs qui vous encouragent.',
        status: "Pens√© pour l'apprentissage en cohortes",
        ctaPrimary: 'Rejoindre la communaut√©',
        ctaSecondary: 'D√©couvrir les cercles en direct',
        chips: {
          communities: 'Communaut√©s',
          courses: 'Cours',
          ebooks: 'E-books',
          tutors: 'Mentors 1:1'
        },
        cards: {
          liveSession: {
            title: 'Session de cohorte en direct',
            meta: 'Commence dans 12 heures',
            cta: 'D√©finir un rappel'
          },
          community: {
            title: 'Pouls de la communaut√©',
            status: 'En direct',
            headline: 'Cercle hebdomadaire de cr√©ation',
            subhead: 'Partagez lancements, retours et succ√®s entre pairs'
          },
          resource: {
            title: 'Digest des cr√©ateurs',
            meta: 'Nouveaut√©s chaque lundi',
            cta: 'Lire maintenant'
          }
        },
        instructorPill: 'Je suis instructeur¬∑rice',
        illustrationAlt: "Collage d'instructeurs et d'apprenants en collaboration"
      }
    }
  },
  es: {
    navigation: {
      login: 'Iniciar sesi√≥n',
      register: 'Unirse a la comunidad',
      language: 'Idioma'
    },
    languageSelector: {
      ariaLabel: 'Cambiar idioma',
      menuHelp: 'Selecciona el idioma que prefieras'
    },
    home: {
      hero: {
        headline: 'Donde los creadores ambiciosos aprenden, ense√±an y crecen juntos',
        subhead:
          'Edulure es un hogar centrado en la comunidad para quienes est√°n obsesionados con compartir habilidades. Intercambia playbooks, coorganiza sesiones en vivo y convierte el conocimiento en impulso con pares que te apoyan.',
        title: 'Donde los creadores ambiciosos aprenden, ense√±an y crecen juntos',
        description:
          'Edulure es un hogar centrado en la comunidad para quienes est√°n obsesionados con compartir habilidades. Intercambia playbooks, coorganiza sesiones en vivo y convierte el conocimiento en impulso con pares que te apoyan.',
        status: 'Dise√±ado para el aprendizaje por cohortes',
        ctaPrimary: 'Unirse a la comunidad',
        ctaSecondary: 'Explorar c√≠rculos en vivo',
        chips: {
          communities: 'Comunidades',
          courses: 'Cursos',
          ebooks: 'E-books',
          tutors: 'Mentores 1:1'
        },
        cards: {
          liveSession: {
            title: 'Sesi√≥n de cohorte en vivo',
            meta: 'Comienza en 12 horas',
            cta: 'Crear recordatorio'
          },
          community: {
            title: 'Pulso de la comunidad',
            status: 'En vivo',
            headline: 'C√≠rculo semanal de creaci√≥n',
            subhead: 'Comparte lanzamientos, feedback y logros con pares'
          },
          resource: {
            title: 'Digest de creador/a',
            meta: 'Novedades cada lunes',
            cta: 'Leer ahora'
          }
        },
        instructorPill: 'Soy instructor/a',
        illustrationAlt: 'Collage de instructores y estudiantes colaborando'
      }
    }
  },
  pt: {
    navigation: {
      login: 'Entrar',
      register: 'Juntar-se √† comunidade',
      language: 'Idioma'
    },
    languageSelector: {
      ariaLabel: 'Alterar idioma',
      menuHelp: 'Escolha o idioma que preferir'
    },
    home: {
      hero: {
        headline: 'Onde construtores ambiciosos aprendem, ensinam e crescem juntos',
        subhead:
          'Edulure √© um lar focado na comunidade para quem √© apaixonado por compartilhar habilidades. Troque playbooks, co-organize sess√µes ao vivo e transforme conhecimento em impulso com pares que torcem por voc√™.',
        title: 'Onde construtores ambiciosos aprendem, ensinam e crescem juntos',
        description:
          'Edulure √© um lar focado na comunidade para quem √© apaixonado por compartilhar habilidades. Troque playbooks, co-organize sess√µes ao vivo e transforme conhecimento em impulso com pares que torcem por voc√™.',
        status: 'Feito para aprendizagem em cohortes',
        ctaPrimary: 'Juntar-se √† comunidade',
        ctaSecondary: 'Ver c√≠rculos ao vivo',
        chips: {
          communities: 'Comunidades',
          courses: 'Cursos',
          ebooks: 'E-books',
          tutors: 'Mentores 1:1'
        },
        cards: {
          liveSession: {
            title: 'Sess√£o de coorte ao vivo',
            meta: 'Come√ßa em 12 horas',
            cta: 'Criar lembrete'
          },
          community: {
            title: 'Pulso da comunidade',
            status: 'Ao vivo agora',
            headline: 'C√≠rculo semanal de constru√ß√£o',
            subhead: 'Compartilhe lan√ßamentos, feedbacks e conquistas com os pares'
          },
          resource: {
            title: 'Digest do criador',
            meta: 'Novidades toda segunda-feira',
            cta: 'Ler agora'
          }
        },
        instructorPill: 'Sou instrutor(a)',
        illustrationAlt: 'Colagem de instrutores e aprendizes colaborando'
      }
    }
  },
  it: {
    navigation: {
      login: 'Accedi',
      register: 'Unisciti alla comunit√†',
      language: 'Lingua'
    },
    languageSelector: {
      ariaLabel: 'Cambia lingua',
      menuHelp: 'Seleziona la lingua preferita'
    },
    home: {
      hero: {
        headline: 'Dove i builder ambiziosi imparano, insegnano e crescono insieme',
        subhead:
          'Edulure √® una casa incentrata sulla comunit√† per chi √® ossessionato dal condividere competenze. Scambia playbook, co-organizza sessioni live e trasforma il sapere in slancio con pari che ti sostengono.',
        title: 'Dove i builder ambiziosi imparano, insegnano e crescono insieme',
        description:
          'Edulure √® una casa incentrata sulla comunit√† per chi √® ossessionato dal condividere competenze. Scambia playbook, co-organizza sessioni live e trasforma il sapere in slancio con pari che ti sostengono.',
        status: "Pensato per l'apprendimento in coorte",
        ctaPrimary: 'Unisciti alla comunit√†',
        ctaSecondary: "Dai un'occhiata ai circle live",
        chips: {
          communities: 'Comunit√†',
          courses: 'Corsi',
          ebooks: 'E-book',
          tutors: 'Tutor 1:1'
        },
        cards: {
          liveSession: {
            title: 'Sessione di coorte live',
            meta: 'Inizia tra 12 ore',
            cta: 'Imposta promemoria'
          },
          community: {
            title: 'Bussola della community',
            status: 'Live ora',
            headline: 'Cerchio di build settimanale',
            subhead: 'Condividi lanci, feedback e successi con i pari'
          },
          resource: {
            title: 'Digest del creator',
            meta: 'Nuove uscite ogni luned√¨',
            cta: 'Leggi ora'
          }
        },
        instructorPill: 'Sono un* istruttore/trice',
        illustrationAlt: 'Collage di istruttori e studenti che collaborano'
      }
    }
  },
  pl: {
    navigation: {
      login: 'Zaloguj siƒô',
      register: 'Do≈ÇƒÖcz do spo≈Çeczno≈õci',
      language: 'Jƒôzyk'
    },
    languageSelector: {
      ariaLabel: 'Zmie≈Ñ jƒôzyk',
      menuHelp: 'Wybierz preferowany jƒôzyk'
    },
    home: {
      hero: {
        headline: 'Miejsce, w kt√≥rym ambitni tw√≥rcy uczƒÖ siƒô, uczƒÖ innych i rosnƒÖ razem',
        subhead:
          'Edulure to spo≈Çeczno≈õciowy dom dla os√≥b, kt√≥re kochajƒÖ dzieliƒá siƒô umiejƒôtno≈õciami. Wymieniaj siƒô playbookami, wsp√≥≈Çprowad≈∫ sesje na ≈ºywo i zamieniaj wiedzƒô w rozpƒôd z partnerami, kt√≥rzy Ci kibicujƒÖ.',
        title: 'Miejsce, w kt√≥rym ambitni tw√≥rcy uczƒÖ siƒô, uczƒÖ innych i rosnƒÖ razem',
        description:
          'Edulure to spo≈Çeczno≈õciowy dom dla os√≥b, kt√≥re kochajƒÖ dzieliƒá siƒô umiejƒôtno≈õciami. Wymieniaj siƒô playbookami, wsp√≥≈Çprowad≈∫ sesje na ≈ºywo i zamieniaj wiedzƒô w rozpƒôd z partnerami, kt√≥rzy Ci kibicujƒÖ.',
        status: 'Stworzone dla nauki w kohortach',
        ctaPrimary: 'Do≈ÇƒÖcz do spo≈Çeczno≈õci',
        ctaSecondary: 'Zajrzyj do aktywnych krƒôg√≥w',
        chips: {
          communities: 'Spo≈Çeczno≈õci',
          courses: 'Kursy',
          ebooks: 'E-booki',
          tutors: 'Tutorzy 1:1'
        },
        cards: {
          liveSession: {
            title: 'Sesja kohorty na ≈ºywo',
            meta: 'Start za 12 godzin',
            cta: 'Ustaw przypomnienie'
          },
          community: {
            title: 'Puls spo≈Çeczno≈õci',
            status: 'Na ≈ºywo',
            headline: 'Cotygodniowy krƒÖg tw√≥rc√≥w',
            subhead: 'Dzielenie siƒô premierami, feedbackiem i sukcesami z innymi'
          },
          resource: {
            title: 'Digest tw√≥rc√≥w',
            meta: 'Nowo≈õci w ka≈ºdy poniedzia≈Çek',
            cta: 'Czytaj teraz'
          }
        },
        instructorPill: 'Jestem instruktorem',
        illustrationAlt: 'Kola≈º instruktor√≥w i uczni√≥w wsp√≥≈ÇpracujƒÖcych ze sobƒÖ'
      }
    }
  },
  hi: {
    navigation: {
      login: '‡§≤‡•â‡§ó ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç',
      register: '‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á‡§Ç',
      language: '‡§≠‡§æ‡§∑‡§æ'
    },
    languageSelector: {
      ariaLabel: '‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç',
      menuHelp: '‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç'
    },
    home: {
      hero: {
        headline: '‡§ú‡§π‡§æ‡§Å ‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ï‡§æ‡§Ç‡§ï‡•ç‡§∑‡•Ä ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§§‡§æ ‡§è‡§ï ‡§∏‡§æ‡§• ‡§∏‡•Ä‡§ñ‡§§‡•á, ‡§∏‡§ø‡§ñ‡§æ‡§§‡•á ‡§î‡§∞ ‡§¨‡§¢‡§º‡§§‡•á ‡§π‡•à‡§Ç',
        subhead:
          '‡§è‡§°‡•ç‡§Ø‡•Ç‡§≤‡§∞ ‡§â‡§® ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø-‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§ò‡§∞ ‡§π‡•à ‡§ú‡•ã ‡§ï‡•å‡§∂‡§≤ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§™‡•ç‡§∞‡§§‡§ø ‡§â‡§§‡•ç‡§∏‡§æ‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§™‡•ç‡§≤‡•á‡§¨‡•Å‡§ï‡•ç‡§∏ ‡§ï‡§æ ‡§Ü‡§¶‡§æ‡§®-‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç, ‡§≤‡§æ‡§á‡§µ ‡§∏‡§§‡•ç‡§∞ ‡§∏‡§π-‡§π‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§ê‡§∏‡•á ‡§∏‡§æ‡§•‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•ã ‡§ó‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡§æ ‡§â‡§§‡•ç‡§∏‡§æ‡§π ‡§¨‡§¢‡§º‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§',
        title: '‡§ú‡§π‡§æ‡§Å ‡§Æ‡§π‡§§‡•ç‡§µ‡§æ‡§ï‡§æ‡§Ç‡§ï‡•ç‡§∑‡•Ä ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§§‡§æ ‡§è‡§ï ‡§∏‡§æ‡§• ‡§∏‡•Ä‡§ñ‡§§‡•á, ‡§∏‡§ø‡§ñ‡§æ‡§§‡•á ‡§î‡§∞ ‡§¨‡§¢‡§º‡§§‡•á ‡§π‡•à‡§Ç',
        description:
          '‡§è‡§°‡•ç‡§Ø‡•Ç‡§≤‡§∞ ‡§â‡§® ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø-‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§ò‡§∞ ‡§π‡•à ‡§ú‡•ã ‡§ï‡•å‡§∂‡§≤ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§™‡•ç‡§∞‡§§‡§ø ‡§â‡§§‡•ç‡§∏‡§æ‡§π‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§™‡•ç‡§≤‡•á‡§¨‡•Å‡§ï‡•ç‡§∏ ‡§ï‡§æ ‡§Ü‡§¶‡§æ‡§®-‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç, ‡§≤‡§æ‡§á‡§µ ‡§∏‡§§‡•ç‡§∞ ‡§∏‡§π-‡§π‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§ê‡§∏‡•á ‡§∏‡§æ‡§•‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•ã ‡§ó‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡§æ ‡§â‡§§‡•ç‡§∏‡§æ‡§π ‡§¨‡§¢‡§º‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§',
        status: '‡§ï‡•ã‡§π‡•ã‡§∞‡•ç‡§ü ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ',
        ctaPrimary: '‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á‡§Ç',
        ctaSecondary: '‡§≤‡§æ‡§á‡§µ ‡§∏‡§∞‡•ç‡§ï‡§≤ ‡§¶‡•á‡§ñ‡•á‡§Ç',
        chips: {
          communities: '‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø',
          courses: '‡§™‡§æ‡§†‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ',
          ebooks: '‡§à-‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á‡§Ç',
          tutors: '1:1 ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡§∞'
        },
        cards: {
          liveSession: {
            title: '‡§≤‡§æ‡§á‡§µ ‡§ï‡•ã‡§π‡•ã‡§∞‡•ç‡§ü ‡§∏‡§§‡•ç‡§∞',
            meta: '12 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§ó‡§æ',
            cta: '‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç'
          },
          community: {
            title: '‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§ï‡•Ä ‡§ß‡§°‡§º‡§ï‡§®',
            status: '‡§Ö‡§≠‡•Ä ‡§≤‡§æ‡§á‡§µ',
            headline: '‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§¨‡§ø‡§≤‡•ç‡§° ‡§∏‡§∞‡•ç‡§ï‡§≤',
            subhead: '‡§∏‡§æ‡§•‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§• ‡§≤‡•â‡§®‡•ç‡§ö, ‡§´‡•Ä‡§°‡§¨‡•à‡§ï ‡§î‡§∞ ‡§ú‡•Ä‡§§ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç'
          },
          resource: {
            title: '‡§ï‡•ç‡§∞‡§ø‡§è‡§ü‡§∞ ‡§ü‡•Ä ‡§°‡§æ‡§á‡§ú‡•á‡§∏‡•ç‡§ü',
            meta: '‡§π‡§∞ ‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞ ‡§®‡§à ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä',
            cta: '‡§Ö‡§≠‡•Ä ‡§™‡§¢‡§º‡•á‡§Ç'
          }
        },
        instructorPill: '‡§Æ‡•à‡§Ç ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§π‡•Ç‡§Å',
        illustrationAlt: '‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï‡•ã‡§Ç ‡§î‡§∞ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ‡§∞‡•ç‡§•‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§ï‡§æ ‡§ï‡•ã‡§≤‡§æ‡§ú'
      }
    }
  },
  ar: {
    navigation: {
      login: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ',
      register: 'ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ',
      language: 'ÿßŸÑŸÑÿ∫ÿ©'
    },
    languageSelector: {
      ariaLabel: 'ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ©',
      menuHelp: 'ÿßÿÆÿ™ÿ± ŸÑÿ∫ÿ™ŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©'
    },
    home: {
      hero: {
        headline: 'ÿ≠Ÿäÿ´ Ÿäÿ™ÿπŸÑŸÖ ÿßŸÑÿ®ŸÜÿßÿ© ÿßŸÑÿ∑ŸÖŸàÿ≠ŸàŸÜ ŸàŸäÿπŸÑŸëŸÖŸàŸÜ ŸàŸäŸÜŸÖŸàŸÜ ŸÖÿπŸãÿß',
        subhead:
          'ÿ•ÿØŸàŸÑŸàÿ± ŸáŸà ŸÖŸàÿ∑ŸÜ Ÿäÿ±ÿ™ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ ŸÑŸÑÿ£ÿ¥ÿÆÿßÿµ ÿßŸÑÿ¥ÿ∫ŸàŸÅŸäŸÜ ÿ®ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™. ÿ™ÿ®ÿßÿØŸÑ ÿßŸÑÿÆÿ∑ÿ∑ÿå Ÿàÿßÿ≥ÿ™ÿ∂ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖÿπŸãÿßÿå Ÿàÿ≠ŸàŸëŸÑ ÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿ•ŸÑŸâ ÿ≤ÿÆŸÖ ŸÖÿπ ÿ£ŸÇÿ±ÿßŸÜ Ÿäÿ¥ÿ¨ÿπŸàŸÜŸÉ.',
        title: 'ÿ≠Ÿäÿ´ Ÿäÿ™ÿπŸÑŸÖ ÿßŸÑÿ®ŸÜÿßÿ© ÿßŸÑÿ∑ŸÖŸàÿ≠ŸàŸÜ ŸàŸäÿπŸÑŸëŸÖŸàŸÜ ŸàŸäŸÜŸÖŸàŸÜ ŸÖÿπŸãÿß',
        description:
          'ÿ•ÿØŸàŸÑŸàÿ± ŸáŸà ŸÖŸàÿ∑ŸÜ Ÿäÿ±ÿ™ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ ŸÑŸÑÿ£ÿ¥ÿÆÿßÿµ ÿßŸÑÿ¥ÿ∫ŸàŸÅŸäŸÜ ÿ®ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™. ÿ™ÿ®ÿßÿØŸÑ ÿßŸÑÿÆÿ∑ÿ∑ÿå Ÿàÿßÿ≥ÿ™ÿ∂ŸÅ ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖÿπŸãÿßÿå Ÿàÿ≠ŸàŸëŸÑ ÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿ•ŸÑŸâ ÿ≤ÿÆŸÖ ŸÖÿπ ÿ£ŸÇÿ±ÿßŸÜ Ÿäÿ¥ÿ¨ÿπŸàŸÜŸÉ.',
        status: 'ŸÖÿµŸÖŸÖ ŸÑŸÑÿ™ÿπŸÑŸÖ ÿßŸÑŸÇÿßÿ¶ŸÖ ÿπŸÑŸâ ÿßŸÑÿØŸèŸÅÿπÿßÿ™',
        ctaPrimary: 'ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ',
        ctaSecondary: 'ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑÿ≠ŸÑŸÇÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©',
        chips: {
          communities: 'ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπÿßÿ™',
          courses: 'ÿßŸÑÿØŸàÿ±ÿßÿ™',
          ebooks: 'ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ©',
          tutors: 'ŸÖÿØÿ±Ÿëÿ≥ŸàŸÜ ŸÅÿ±ÿØŸäŸàŸÜ'
        },
        cards: {
          liveSession: {
            title: 'ÿ¨ŸÑÿ≥ÿ© ÿØŸÅÿπÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ©',
            meta: 'ÿ™ÿ®ÿØÿ£ ÿÆŸÑÿßŸÑ 12 ÿ≥ÿßÿπÿ©',
            cta: 'ÿ™ÿπŸäŸäŸÜ ÿ™ÿ∞ŸÉŸäÿ±'
          },
          community: {
            title: 'ŸÜÿ®ÿ∂ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ',
            status: 'ŸÖÿ®ÿßÿ¥ÿ± ÿßŸÑÿ¢ŸÜ',
            headline: 'ÿ≠ŸÑŸÇÿ© ÿ®ŸÜÿßÿ° ÿ£ÿ≥ÿ®ŸàÿπŸäÿ©',
            subhead: 'ÿ¥ÿßÿ±ŸÉ ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇÿßÿ™ ŸàÿßŸÑÿ™ÿπŸÇŸäÿ®ÿßÿ™ ŸàÿßŸÑŸÜÿ¨ÿßÿ≠ÿßÿ™ ŸÖÿπ ÿßŸÑÿ£ŸÇÿ±ÿßŸÜ'
          },
          resource: {
            title: 'ŸÖŸÑÿÆÿµ ÿßŸÑŸÖÿ®ÿØÿπŸäŸÜ',
            meta: 'ÿ•ÿµÿØÿßÿ±ÿßÿ™ ÿ¨ÿØŸäÿØÿ© ŸÉŸÑ ŸäŸàŸÖ ÿßÿ´ŸÜŸäŸÜ',
            cta: 'ÿßŸÇÿ±ÿ£ ÿßŸÑÿ¢ŸÜ'
          }
        },
        instructorPill: 'ÿ£ŸÜÿß ŸÖÿØÿ±Ÿëÿ≥/ÿ©',
        illustrationAlt: 'ŸÖÿ¨ŸÖŸàÿπÿ© ÿµŸàÿ± ŸÑŸÖÿØÿ±ÿ®ŸäŸÜ ŸàŸÖÿ™ÿπŸÑŸëŸÖŸäŸÜ Ÿäÿ™ÿπÿßŸàŸÜŸàŸÜ'
      }
    }
  },
  de: {
    navigation: {
      login: 'Anmelden',
      register: 'Der Community beitreten',
      language: 'Sprache'
    },
    languageSelector: {
      ariaLabel: 'Sprache √§ndern',
      menuHelp: 'W√§hle deine bevorzugte Sprache'
    },
    home: {
      hero: {
        headline: 'Wo ambitionierte Builder gemeinsam lernen, lehren und wachsen',
        subhead:
          'Edulure ist ein communityorientiertes Zuhause f√ºr Menschen, die leidenschaftlich gerne F√§higkeiten teilen. Tausche Playbooks, veranstalte gemeinsam Live-Sessions und verwandle Wissen in Schwung mit Gleichgesinnten, die dich anfeuern.',
        title: 'Wo ambitionierte Builder gemeinsam lernen, lehren und wachsen',
        description:
          'Edulure ist ein communityorientiertes Zuhause f√ºr Menschen, die leidenschaftlich gerne F√§higkeiten teilen. Tausche Playbooks, veranstalte gemeinsam Live-Sessions und verwandle Wissen in Schwung mit Gleichgesinnten, die dich anfeuern.',
        status: 'Gemacht f√ºr kohortenbasiertes Lernen',
        ctaPrimary: 'Der Community beitreten',
        ctaSecondary: 'Live-Circles entdecken',
        chips: {
          communities: 'Communities',
          courses: 'Kurse',
          ebooks: 'E-Books',
          tutors: '1:1 Tutor:innen'
        },
        cards: {
          liveSession: {
            title: 'Live-Kohorten-Session',
            meta: 'Startet in 12 Stunden',
            cta: 'Erinnerung setzen'
          },
          community: {
            title: 'Community-Puls',
            status: 'Jetzt live',
            headline: 'W√∂chentlicher Build-Circle',
            subhead: 'Teile Launches, Feedback und Erfolge mit Peers'
          },
          resource: {
            title: 'Creator Tea Digest',
            meta: 'Neue Drops jeden Montag',
            cta: 'Jetzt lesen'
          }
        },
        instructorPill: 'Ich bin Trainer:in',
        illustrationAlt: 'Collage aus Lehrenden und Lernenden, die zusammenarbeiten'
      }
    }
  },
  ru: {
    navigation: {
      login: '–í–æ–π—Ç–∏',
      register: '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É',
      language: '–Ø–∑—ã–∫'
    },
    languageSelector: {
      ariaLabel: '–ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫',
      menuHelp: '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫'
    },
    home: {
      hero: {
        headline: '–ì–¥–µ –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã–µ —Å–æ–∑–¥–∞—Ç–µ–ª–∏ —É—á–∞—Ç—Å—è, –¥–µ–ª—è—Ç—Å—è –æ–ø—ã—Ç–æ–º –∏ —Ä–∞—Å—Ç—É—Ç –≤–º–µ—Å—Ç–µ',
        subhead:
          'Edulure ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ, –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ª—é–±—è—Ç –¥–µ–ª–∏—Ç—å—Å—è –Ω–∞–≤—ã–∫–∞–º–∏. –û–±–º–µ–Ω–∏–≤–∞–π—Ç–µ—Å—å –º–µ—Ç–æ–¥–∏–∫–∞–º–∏, –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –ø—Ä—è–º—ã–µ —Å–µ—Å—Å–∏–∏ –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–π—Ç–µ –∑–Ω–∞–Ω–∏—è –≤ –¥–≤–∏–∂–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.',
        title: '–ì–¥–µ –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã–µ —Å–æ–∑–¥–∞—Ç–µ–ª–∏ —É—á–∞—Ç—Å—è, –¥–µ–ª—è—Ç—Å—è –æ–ø—ã—Ç–æ–º –∏ —Ä–∞—Å—Ç—É—Ç –≤–º–µ—Å—Ç–µ',
        description:
          'Edulure ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ, –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ª—é–±—è—Ç –¥–µ–ª–∏—Ç—å—Å—è –Ω–∞–≤—ã–∫–∞–º–∏. –û–±–º–µ–Ω–∏–≤–∞–π—Ç–µ—Å—å –º–µ—Ç–æ–¥–∏–∫–∞–º–∏, –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –ø—Ä—è–º—ã–µ —Å–µ—Å—Å–∏–∏ –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–π—Ç–µ –∑–Ω–∞–Ω–∏—è –≤ –¥–≤–∏–∂–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.',
        status: '–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –≤ –∫–æ–≥–æ—Ä—Ç–∞—Ö',
        ctaPrimary: '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É',
        ctaSecondary: '–ó–∞–≥–ª—è–Ω—É—Ç—å –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫—Ä—É–≥–∏',
        chips: {
          communities: '–°–æ–æ–±—â–µ—Å—Ç–≤–∞',
          courses: '–ö—É—Ä—Å—ã',
          ebooks: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏',
          tutors: '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∏ 1:1'
        },
        cards: {
          liveSession: {
            title: '–ñ–∏–≤–æ–π —Å–æ–∑–≤–æ–Ω –ø–æ—Ç–æ–∫–∞',
            meta: '–°—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤',
            cta: '–ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ'
          },
          community: {
            title: '–ü—É–ª—å—Å —Å–æ–æ–±—â–µ—Å—Ç–≤–∞',
            status: '–í —ç—Ñ–∏—Ä–µ',
            headline: '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –∫—Ä—É–≥ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π',
            subhead: '–î–µ–ª–∏—Ç–µ—Å—å —Ä–µ–ª–∏–∑–∞–º–∏, –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é –∏ –ø–æ–±–µ–¥–∞–º–∏ —Å –∫–æ–ª–ª–µ–≥–∞–º–∏'
          },
          resource: {
            title: '–î–∞–π–¥–∂–µ—Å—Ç —Å–æ–∑–¥–∞—Ç–µ–ª—è',
            meta: '–ù–æ–≤—ã–µ –≤—ã–ø—É—Å–∫–∏ –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
            cta: '–ß–∏—Ç–∞—Ç—å —Å–µ–π—á–∞—Å'
          }
        },
        instructorPill: '–Ø –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å',
        illustrationAlt: '–ö–æ–ª–ª–∞–∂ –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –∏ —É—á–∞—â–∏—Ö—Å—è, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤–º–µ—Å—Ç–µ'
      }
    }
  }
};

const LanguageContext = createContext({
  language: 'en',
  setLanguage: () => {},
  languages: SUPPORTED_LANGUAGES,
  t: (key, fallback) => fallback ?? key
});

const resolveInitialLanguage = () => {
  if (typeof window === 'undefined') {
    return 'en';
  }

  const stored = window.localStorage.getItem(STORAGE_KEY);
  if (stored && SUPPORTED_LANGUAGES.some((lang) => lang.code === stored)) {
    return stored;
  }

  const navigatorLanguages = Array.isArray(window.navigator.languages)
    ? window.navigator.languages
    : [window.navigator.language ?? 'en'];

  for (const locale of navigatorLanguages) {
    if (!locale) continue;
    const languageCode = locale.toLowerCase().split('-')[0];
    const match = SUPPORTED_LANGUAGES.find((lang) => lang.code === languageCode);
    if (match) {
      return match.code;
    }
  }

  return 'en';
};

const resolveTranslation = (languageCode, key) => {
  const path = key.split('.');
  let current = TRANSLATIONS[languageCode];

  for (const segment of path) {
    if (current && Object.prototype.hasOwnProperty.call(current, segment)) {
      current = current[segment];
    } else {
      current = undefined;
      break;
    }
  }

  return typeof current === 'string' ? current : undefined;
};

export function LanguageProvider({ children }) {
  const [language, setLanguageState] = useState(() => resolveInitialLanguage());

  useEffect(() => {
    if (typeof document !== 'undefined') {
      document.documentElement.lang = language;
      const resolved = SUPPORTED_LANGUAGES.find((lang) => lang.code === language);
      document.documentElement.dir = resolved?.direction === 'rtl' ? 'rtl' : 'ltr';
    }

    if (typeof window !== 'undefined') {
      window.localStorage.setItem(STORAGE_KEY, language);
    }
  }, [language]);

  const setLanguage = useCallback((code) => {
    const target = SUPPORTED_LANGUAGES.find((lang) => lang.code === code);
    if (!target) return;
    setLanguageState(target.code);
  }, []);

  const translate = useCallback(
    (key, fallback) => {
      const current = resolveTranslation(language, key);
      if (current) {
        return current;
      }
      const defaultTranslation = resolveTranslation('en', key);
      if (defaultTranslation) {
        return defaultTranslation;
      }
      return fallback ?? key;
    },
    [language]
  );

  const value = useMemo(
    () => ({
      language,
      languages: SUPPORTED_LANGUAGES,
      setLanguage,
      t: translate
    }),
    [language, setLanguage, translate]
  );

  return <LanguageContext.Provider value={value}>{children}</LanguageContext.Provider>;
}

LanguageProvider.propTypes = {
  children: PropTypes.node.isRequired
};

export function useLanguage() {
  return useContext(LanguageContext);
}

export function useTranslate() {
  const { t } = useLanguage();
  return t;
}

export default LanguageContext;
