# Environment Updates – Version 1.00

- Documented defaults for the dispatcher controls in `.env.example` (`DOMAIN_EVENTS_DISPATCH_ENABLED`, `DOMAIN_EVENTS_DISPATCH_POLL_INTERVAL_MS`, `DOMAIN_EVENTS_DISPATCH_BATCH_SIZE`, etc.) so operations teams can tune throughput, retry policy, and recovery windows per environment.
- Synchronized `test/setupEnv.js` with the new variables to guarantee Vitest exercises the dispatcher using deterministic values during automation.
- Added `FEATURE_FLAG_SYNC_ON_BOOT`, `FEATURE_FLAG_SYNC_ACTOR`, and `FEATURE_FLAG_DEFAULT_ENVIRONMENT` to `.env.example` and the Vitest harness so manifest synchronisation, governance audit ownership, and evaluation defaults can be configured per deployment tier.
- Introduced new `.env.example` knobs for Stripe (`STRIPE_MODE`, sandbox secrets, retry/circuit/webhook tuning), PayPal (sandbox credentials, retry/circuit/webhook windows), CloudConvert (sandbox API key, base URL, retry/circuit settings), and Twilio (environment, credentials, retry/circuit controls) alongside matching `test/setupEnv.js` defaults so third-party wrappers can be exercised consistently across environments.
- Documented the `AUDIT_LOG_*` family (tenant id, severity, IP capture toggle, metadata redaction list, request context switch, and byte budget) to ensure audit evidence policies are explicit for operations, staging, and automated test harnesses.
- Declared `SLO_*` environment defaults (bucket minutes, window length, latency reservoir, target availability, burn-rate thresholds, optional JSON manifest) so observability policy can be tuned per environment while Vitest inherits deterministic SLO definitions.
- Documented the new environment parity knobs (`ENVIRONMENT_*`, `RELEASE_CHANNEL`) covering manifest paths, provider metadata, dependency declarations, and parity budgets to keep Terraform/Docker hashes aligned across dev, staging, and production. 【F:backend-nodejs/src/config/env.js†L940-L1170】
- Added telemetry pipeline configuration (`TELEMETRY_*`) covering ingestion defaults, allowed sources, consent behaviour, export destination/schedule, freshness thresholds, and lineage toggles so operations can govern event capture and warehouse automation per environment. 【F:backend-nodejs/src/config/env.js†L560-L1179】
- Updated `.env.example` and the Vitest `test/setupEnv.js` harness with the telemetry pipeline variables (`TELEMETRY_*`) so operations can configure ingestion/exports consistently across environments and tests inherit safe defaults. 【F:backend-nodejs/.env.example†L141-L205】【F:backend-nodejs/test/setupEnv.js†L155-L194】

- Added `MONETIZATION_RECONCILIATION_TENANTS` and `MONETIZATION_RECONCILIATION_TENANT_CACHE_MINUTES` to control allow-listed tenants and cache refresh cadence for the monetisation reconciliation job.
- Documented `RELEASE_*` configuration knobs (`RELEASE_REQUIRED_GATES`, `RELEASE_MIN_COVERAGE`, `RELEASE_MAX_TEST_FAILURE_RATE`, `RELEASE_MAX_CRITICAL_VULNERABILITIES`, `RELEASE_MAX_HIGH_VULNERABILITIES`, `RELEASE_MAX_OPEN_INCIDENTS`, `RELEASE_MAX_ERROR_RATE`, `RELEASE_CHANGE_FREEZE_CRON`) so release managers can tune go/no-go criteria, thresholds, and freeze schedules per environment. 【F:backend-nodejs/src/config/env.js†L962-L1181】【F:backend-nodejs/.env.example†L206-L213】
