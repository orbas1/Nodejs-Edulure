# Controller Changes

- `AuthController` now enforces a 12+ character password policy with uppercase/lowercase/number/symbol checks, captures request context (IP/User-Agent) for session logging, and returns standardised response envelopes.
- `UserController` and `CommunityController` validate query/body payloads with Joi, wrap responses in the shared envelope helper, and surface descriptive pagination metadata.
- Introduced `ContentController` delivering upload session creation, ingestion confirmation (with antivirus/quarantine responses), asset listing/detail, viewer token issuance, analytics reporting, progress tracking, and event logging backed by the new AssetService.
- Added verification workflows to `AuthController`, including register responses that surface verification metadata, login guards that block unverified accounts, and new handlers for `/verify-email`, `/resend-verification`, `/refresh`, `/logout`, and `/logout-all` with Joi validation, contextual messaging, and request-context aware auditing.
- Added `CourseController` to expose course authoring endpoints (`/api/courses`), including course creation/update, module/lesson/assignment management, enrollment orchestration, and learner progress reporting with Joi validation mirroring OpenAPI contracts.
- Introduced `EbookController` to expose `/api/ebooks` endpoints covering ebook listing/detail, creation/update/publish flows, chapter CRUD + reordering, highlight/bookmark management, reader settings persistence, and DRM download issuance with Joi validation mirroring the expanded OpenAPI specification.
- Added `TutorController` under `/api/tutors` to surface tutor profile management, availability publishing, booking requests, cancellation flows, and payout preparation hooks with role-aware guards and Joi validation aligned to the tutor OpenAPI schemas.
- Introduced `LiveClassroomController` to expose `/api/live-classrooms` endpoints for classroom scheduling, seat management, registration/ticket issuance, join context retrieval (Agora tokens), and chat session retrieval while emitting audit logs and Prometheus metrics through the service layer.
- Added `PaymentController` under `/api/payments` to validate Stripe/PayPal intent creation payloads, enforce coupon lookup and per-user limits, orchestrate PayPal capture, issue refunds with role-aware guards, surface finance summaries, expose coupon detail endpoints, and receive Stripe webhooks with raw body signature validation.
- Introduced `CommunityEngagementController` exposing points, streak, leaderboard, calendar, RSVP, and reminder endpoints with role-aware guards, request validation, and analytics-friendly response envelopes aligned to the expanded OpenAPI schemas.
- Added `CommunityChatController` and `DirectMessageController` to drive the messaging surface: Joi validation enforces message/reaction/moderation/presence payloads, responses wrap threaded messages with pagination metadata, and controllers delegate to the new services while emitting consistent success envelopes and HTTP status codes.
- Introduced `SocialGraphController` routing under `/api/social` to manage follower/following lists, follow/unfollow actions, approval/decline decisions, mutes, blocks, recommendations, and privacy updates. Joi schemas guard query/body payloads, response envelopes include pagination and viewer context metadata, and HTTP status codes differentiate accepted vs pending follow flows.
