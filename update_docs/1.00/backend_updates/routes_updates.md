# Routes Updates

- Added `GET /api/docs` Swagger UI and enhanced `GET /health` to perform database checks.
- Updated user and community routes to enforce role hierarchy via the hardened auth middleware.
- Registered `/api/content` router exposing upload sessions, ingestion confirmation, listing/detail, viewer token, analytics, events, and progress endpoints guarded by auth roles.
- Extended `/api/auth` router with `/verify-email`, `/resend-verification`, `/refresh`, `/logout`, and `/logout-all` endpoints powering verification and session governance flows.
- Registered `GET /metrics` as a Prometheus scrape endpoint guarded by bearer/basic credentials and IP allow-lists for the operations team.
- Registered `/api/courses` routes covering listing, CRUD for modules/lessons/assignments, enrollment management, and learner progress updates behind role-aware auth middleware.
- Registered `/api/ebooks` routes covering listing/detail, create/update/publish flows, chapter CRUD + reorder, highlight/bookmark management, reader settings, and DRM download issuance with auth gating aligned to instructors/admins for authoring and authenticated learners for reading.
- Registered `/api/tutors` routes exposing tutor profile CRUD, availability publishing, booking creation/cancellation, hourly rate updates, and booking summary reporting with instructor/admin guards.
- Registered `/api/live-classrooms` routes for classroom scheduling, invite code generation, registration (free/paid), join context issuance (Agora token + CDN endpoints), chat session retrieval, and seat limit administration with analytics hooks.
- Registered `/api/payments` routes for Stripe/PayPal intent creation, PayPal capture, refund issuance, finance summaries, coupon lookups, and Stripe webhook ingestion with raw-body middleware and role-aware guards.
- Expanded `/api/communities` router with engagement endpoints for progress snapshots, instructor-awarded points, streak check-ins, leaderboards, event calendars, RSVP tracking, and reminder scheduling to power automated community programmes.
- Added `/api/communities/:communityId/chat/...` routes for channel listing, paginated timelines (with thread filters), read receipts, reactions, moderation, and presence updates plus the standalone `/api/chat` router for DM thread listing/creation, message posting, and read acknowledgements.
- Extended `/api/chat` with `PATCH /api/chat/threads/preferences/notifications`, allowing authenticated learners to enable or disable global DM alerts via the new controller/service handler.
- Registered `/api/social` routes to deliver the follower graph: follower/following listing with pagination filters, follow/unfollow actions, approval/decline endpoints, recommendations, mutes, blocks, and privacy CRUD; all routes reuse the hardened auth middleware and the shared response envelope.
- Registered `/api/explorer` router exposing `POST /api/explorer/search` for federated discovery queries plus authenticated CRUD endpoints under `/api/explorer/saved-searches` so users can create, list, update (pin/rename), and delete saved searches backed by the new explorer services.
- Added `/api/profiles/:userId/overview` route delivering cached profile aggregations (hero metrics, badges, shelves, quick actions, insights, timeline) with role-aware guards and ETag headers so dashboards and mobile clients can efficiently hydrate overview data while respecting privacy settings.
- Enhanced `GET /api/dashboard/me` to return dual-role dashboards: the route now merges learner and instructor payloads, surfaces instructor metrics/analytics/pricing/bookings widgets, expands profile stats/bio fields, and exposes search index entries so React dashboards render instructor workspaces without additional requests.
- Registered `/api/admin/console` with auth middleware that restricts access to administrators and customer support supervisors. The route streams the consolidated operational snapshot (metrics, approvals, incidents, refunds, support backlog, policy updates) returned by `AdminConsoleService`, supports optional `lookbackDays` query parameters, and emits cache headers so the React console can poll without overwhelming the database.
