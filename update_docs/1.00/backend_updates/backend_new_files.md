# New Backend Files

- `backend-nodejs/src/config/env.js` – environment validation and typed configuration export.
- `backend-nodejs/src/docs/openapi.json` – OpenAPI 3.0 specification consumed by Swagger UI and client SDK generation.
- `backend-nodejs/src/models/CommunityMemberModel.js`, `DomainEventModel.js`, `UserSessionModel.js` – new repositories supporting orchestration and auditing.
- `backend-nodejs/src/utils/httpResponse.js` – shared success/pagination response helper.
- `backend-nodejs/migrations/20241010120000_initial_schema.js` – Knex migration establishing users, communities, memberships, domain events, and session tables.
- `backend-nodejs/knexfile.cjs` – Knex CLI configuration.
- `.github/dependabot.yml` – automated dependency monitoring for backend, frontend, mobile, and GitHub Actions.
- `.nvmrc` – Node.js version pin for local and CI execution.
- `scripts/verify-node-version.mjs` – workspace runtime guard ensuring Node/npm versions and package manager choice are compliant before installs.
- `backend-nodejs/src/config/storage.js` – centralised Cloudflare R2 client configuration and endpoint export.
- `backend-nodejs/src/config/jwtKeyStore.js` – shared JWT signing key lookup, verification, and rotation metadata access.
- `backend-nodejs/src/services/StorageService.js`, `AssetService.js`, `AssetIngestionService.js` – storage abstraction, asset lifecycle orchestration, and conversion worker.
- `backend-nodejs/src/services/AntivirusService.js` – ClamAV-backed streaming scanner with caching, quarantine routing, and Prometheus instrumentation.
- `backend-nodejs/src/controllers/ContentController.js`, `routes/content.routes.js` – content API surface for upload sessions, ingestion, analytics, and telemetry.
- `backend-nodejs/src/models/ContentAssetModel.js`, `AssetConversionOutputModel.js`, `AssetIngestionJobModel.js`, `ContentAssetEventModel.js`, `ContentAuditLogModel.js`, `EbookProgressModel.js` – Knex repositories powering the content pipeline.
- `backend-nodejs/migrations/20241020130000_content_assets.js` – schema for assets, ingestion jobs, conversion outputs, events, audit logs, and ebook progress.
- `backend-nodejs/vitest.config.mjs`, `backend-nodejs/test/setupEnv.js`, `backend-nodejs/test/storageService.test.js` – Vitest harness and suites covering Cloudflare R2 storage behaviours.
- `backend-nodejs/scripts/rotate-jwt-keys.js` – operational CLI for generating and promoting JWT signing keys.
- `backend-nodejs/migrations/20241030140000_user_security_enhancements.js` – incremental migration adding lockout telemetry columns to `users` and provisioning the `user_email_verification_tokens` table.
- `backend-nodejs/src/models/EmailVerificationTokenModel.js` – repository layer for hashing, issuing, and consuming verification tokens with replacement semantics.
- `backend-nodejs/src/services/MailService.js` – SMTP-backed mailer that renders production templates for security communications.
- `backend-nodejs/src/services/EmailVerificationService.js` – orchestration service handling issuance, throttling, and consumption of verification tokens with domain event logging.
- `backend-nodejs/test/mailService.test.js` – Vitest coverage validating email templates and SMTP payload construction.
- `backend-nodejs/src/observability/requestContext.js` & `backend-nodejs/src/observability/metrics.js` – AsyncLocalStorage-backed correlation context and Prometheus metrics registry powering the new observability stack, plus `backend-nodejs/src/middleware/requestContext.js` for Express integration.
- `backend-nodejs/migrations/20241101090000_enhance_user_sessions.js` – migration enriching `user_sessions` with `last_used_at`, `rotated_at`, and `revoked_by` metadata for rotation governance.
- `backend-nodejs/src/services/SessionRegistry.js` – in-memory/session cache ensuring revoked sessions are denied without repeated database lookups.
- `backend-nodejs/test/sessionRegistry.test.js` – Vitest suite validating session cache behaviour, TTL eviction, and revocation handling.
- `backend-nodejs/migrations/20241105153000_data_hygiene.js` – migration adding retention policy/audit tables, owner membership triggers, and soft-delete columns for data hygiene automation.
- `backend-nodejs/seeds/001_bootstrap.js` – production-grade seed dataset covering verified roles, communities, asset lifecycle telemetry, and stale session cases for governance validation.
- `backend-nodejs/src/services/dataRetentionService.js` – policy-driven retention executor with audit logging used by scheduled hygiene jobs.
- `backend-nodejs/scripts/run-data-retention.js` – CLI wrapper for enforcing retention policies with dry-run/verbose flags.
- `backend-nodejs/src/jobs/dataRetentionJob.js` – managed cron scheduler coordinating retention enforcement with failure backoff and startup toggles.
- `backend-nodejs/test/dataRetentionService.test.js`, `backend-nodejs/test/dataRetentionJob.test.js` – Vitest coverage for the retention executor strategies and scheduler resilience.
- `backend-nodejs/migrations/20241107101500_feature_flags_and_runtime_config.js` – creates feature flag, audit, and runtime configuration tables with seed data.
- `backend-nodejs/src/models/FeatureFlagModel.js`, `backend-nodejs/src/models/ConfigurationEntryModel.js` – repositories exposing JSON-parsed flag/config metadata.
- `backend-nodejs/src/services/FeatureFlagService.js` – caching feature flag/runtime configuration orchestrator with metrics integration.
- `backend-nodejs/src/middleware/runtimeConfig.js`, `backend-nodejs/src/controllers/RuntimeConfigController.js`, `backend-nodejs/src/routes/runtimeConfig.routes.js` – Express plumbing exposing `/api/runtime` endpoints and request helpers.
- `backend-nodejs/scripts/runtime-config.js` – CLI generating flag/config snapshots for ops.
- `backend-nodejs/test/featureFlagService.test.js`, `backend-nodejs/test/runtimeConfigService.test.js` – Vitest coverage validating strategy evaluation and runtime config exposure.
- `backend-nodejs/eslint.config.mjs` – ESLint flat configuration enabling workspace-wide governance with Node/test aware rules.
- `backend-nodejs/scripts/provision-r2-buckets.js` – operational CLI that creates/validates Cloudflare R2 buckets with lifecycle, CORS, and tagging policies.
- `backend-nodejs/test/antivirusService.test.js` – Vitest suite exercising antivirus scanning, detection, caching, and storage streaming integrations.
- `backend-nodejs/src/services/PaymentService.js`, `backend-nodejs/src/controllers/PaymentController.js`, `backend-nodejs/src/routes/payment.routes.js`, `backend-nodejs/src/models/PaymentIntentModel.js`, `PaymentCouponModel.js`, `PaymentRefundModel.js`, `PaymentLedgerEntryModel.js`, and migration `20241112120000_payments_commerce.js` – payments domain covering intents, coupons, refunds, ledgers, and HTTP entry points for Stripe/PayPal processing.
- `backend-nodejs/test/paymentService.test.js` – Vitest coverage for tax allocation, coupon enforcement, PayPal capture, refund orchestration, and Stripe webhook signature validation.
- `backend-nodejs/migrations/20241120130000_community_engagement.js` – schema introducing member points, point transactions, streaks, events, event participants, and reminder tables powering the engagement programme.
- `backend-nodejs/src/models/CommunityMemberPointModel.js`, `CommunityMemberPointTransactionModel.js`, `CommunityMemberStreakModel.js`, `CommunityEventModel.js`, `CommunityEventParticipantModel.js`, `CommunityEventReminderModel.js` – repositories encapsulating points, streak, event, RSVP, and reminder persistence with transactional helpers.
- `backend-nodejs/src/services/CommunityEngagementService.js` – engagement orchestration covering tier points, streak rollovers, leaderboard aggregation, event calendars, RSVP updates, and reminder scheduling.
- `backend-nodejs/src/controllers/CommunityEngagementController.js` – Express controller exposing engagement endpoints aligned with the new OpenAPI schemas.
- `backend-nodejs/src/jobs/communityReminderJob.js` – cron-friendly reminder dispatcher with scheduler integration, batching, telemetry, and retry handling.
- `backend-nodejs/test/communityEngagementService.test.js`, `backend-nodejs/test/communityReminderJob.test.js` – Vitest suites covering point awards, leaderboards, calendar hydration, and reminder dispatch logic.
- `backend-nodejs/migrations/20241123100000_community_chat.js`, messaging repositories (`src/models/CommunityMessageModel.js`, `CommunityChannelMemberModel.js`, `CommunityMessageReactionModel.js`, `CommunityMessageModerationModel.js`, `DirectMessageThreadModel.js`, `DirectMessageParticipantModel.js`, `DirectMessageModel.js`, `UserPresenceSessionModel.js`), services (`src/services/CommunityChatService.js`, `src/services/DirectMessageService.js`), controllers (`src/controllers/CommunityChatController.js`, `src/controllers/DirectMessageController.js`), router (`src/routes/chat.routes.js`), Vitest coverage (`test/communityChatService.test.js`, `test/directMessageService.test.js`, `test/chatHttpRoutes.test.js`), and expanded seeds/OpenAPI assets powering channel chat, reactions, moderation, presence, and direct messaging workflows.
- `backend-nodejs/migrations/20241125140000_social_graph.js`, social graph repositories (`src/models/UserFollowModel.js`, `UserPrivacySettingModel.js`, `UserMuteModel.js`, `UserBlockModel.js`, `FollowRecommendationModel.js`, `SocialAuditLogModel.js`), service (`src/services/SocialGraphService.js`), controller (`src/controllers/SocialGraphController.js`), router (`src/routes/social.routes.js`), tests (`test/socialGraphService.test.js`, `test/socialGraphHttpRoutes.test.js`), env/README updates, and OpenAPI additions powering follower/following lists, follow approvals, recommendations, mutes, blocks, and privacy management.
- `backend-nodejs/src/config/search.js` – shared Meilisearch client factory building admin/replica/read pools with environment-driven timeouts and user-agent metadata consumed by search services and scripts.
- `backend-nodejs/src/services/SearchClusterService.js` – Meilisearch orchestration service handling index provisioning, settings drift detection, API key audits, health monitoring, and snapshot automation with Prometheus instrumentation.
- `backend-nodejs/scripts/provision-search-cluster.js` – CLI workflow to bootstrap explorer indexes, run health checks, and optionally trigger cluster snapshots after synchronisation.
- `backend-nodejs/test/searchClusterService.test.js` – Vitest coverage verifying index provisioning, health checks, and snapshot execution for the search cluster manager.
- `backend-nodejs/src/services/SearchIngestionService.js` – ingestion orchestrator that streams batched/concurrent loads for communities, courses, ebooks, tutors, profiles, ads, and events with incremental cursors, delete-before-reindex safeguards, and Prometheus instrumentation.
- `backend-nodejs/scripts/reindex-search-indexes.js` – operational CLI driving full or delta Meilisearch reloads with concurrency controls, dry-run logging, and per-index selection.
- `backend-nodejs/test/searchIngestionService.test.js` – Vitest suite validating loader pagination, incremental filters, error propagation, and metric emission for the ingestion pipeline.
- `backend-nodejs/migrations/20241119150000_ads_intelligence.js` – provisions ads campaign, creative, audience, spend, and performance tables powering explorer ads targeting and reporting.
- `backend-nodejs/migrations/20241112123000_course_modules_and_drip_engine.js`, `20241115131500_ebook_experience_upgrade.js`, and `20241118103000_live_classroom_and_tutor_hire.js` – establish the curriculum, ebook, tutor, and live classroom schemas that now backfill search ingestion datasets with production-quality relationships and telemetry columns.
- `backend-nodejs/migrations/20241124150000_explorer_saved_searches.js` – adds the `saved_searches` table with filters, global filters, sort preferences, pinning, and audit timestamps for explorer governance.
- `backend-nodejs/src/models/SavedSearchModel.js` – repository serialising explorer saved searches with JSON helpers for entity/global filters and sort preferences.
- `backend-nodejs/src/services/SavedSearchService.js` – transactional CRUD orchestrator for saved searches handling uniqueness, pin toggles, and usage telemetry updates.
- `backend-nodejs/src/services/ExplorerSearchService.js` – federated search orchestrator normalising Meilisearch responses, facets, and geo markers for explorer delivery.
- `backend-nodejs/src/controllers/ExplorerController.js` and `backend-nodejs/src/routes/explorer.routes.js` – Express entry points exposing `/api/explorer/search` and `/api/explorer/saved-searches` endpoints with Joi validation.
- `backend-nodejs/src/utils/geo.js` & `backend-nodejs/src/data/countryCentroids.json` – country centroid lookup utilities powering map-ready geo markers in explorer responses.
- `backend-nodejs/src/repositories/ProfileRepository.js` – aggregation repository composing user profile, social, community, engagement, and commerce data with privacy/role guards for profile dashboards.
- `backend-nodejs/src/services/ProfileAggregationService.js` – service orchestrating cached hero metrics, badges, shelves, insights, quick actions, and timeline events for `/api/profiles/:id/overview`.
- `backend-nodejs/src/controllers/ProfileController.js` & `backend-nodejs/src/routes/profile.routes.js` – Express controller/router exposing the profile overview endpoint with Joi validation and cache headers.
- `backend-nodejs/test/profileAggregationService.test.js`, `backend-nodejs/test/profileHttpRoutes.test.js` – Vitest coverage validating aggregation stitching, cache behaviour, and HTTP responses for the new profile surface.
