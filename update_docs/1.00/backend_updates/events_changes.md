# Events Changes

- Added domain event recording (`domain_events` table) for user registrations and community creation, enabling future analytics and moderation hooks.
- Introduced `content_asset_events` to capture view/download/progress actions with actor metadata for analytics dashboards and DRM enforcement.
- `content_audit_logs` now record lifecycle state changes (upload confirmed, processing completed, ingestion failures) to provide operational traceability.
- Extended domain auditing to capture login failures, lockouts (with remaining-attempt telemetry), verification issuance, verification completion, session rotation (`user.session_rotated`), and logout events (`user.session_revoked`, `user.sessions_revoked`) for downstream security analytics.
- Added `data_retention_audit_logs` to persist per-policy enforcement metadata (rows affected, sample IDs, dry-run flags) so governance teams can evidence deletion SLAs.
- Course lifecycle emits domain events (`course.created`, `course.updated`, `course.module.*`, `course.lesson.*`, `course.assignment.*`, `course.progress.updated`, `course.enrollment.updated`) to keep auditing, analytics, and notification pipelines aligned with authoring actions.
- Added `ebook_watermark_events` to persist every DRM download issuance with device/IP metadata so support and compliance teams can audit download limits, while Prometheus counters expose download/highlight/bookmark/reader-preference activity for observability dashboards.
- Tutor and live classroom domains emit lifecycle events: `tutor.profile.created/updated`, `tutor.availability.published`, `tutor.booking.requested/confirmed/cancelled`, `live_classroom.scheduled`, `live_classroom.registration.created/cancelled`, `live_classroom.session.started/ended`, and `live_classroom.chat.message_logged` to power notifications, billing hooks, seat utilisation analytics, and compliance logging.
- Community engagement emits `community.points.awarded`, `community.streak.updated`, `community.engagement.leaderboard.generated`, `community.event.created`, `community.event.rsvp.updated`, and `community.event.reminder.*` events so analytics, notification pipelines, and operations dashboards capture programme health and reminder outcomes.
- Messaging suite emits `community.message.created`, `community.message.reacted`, `community.message.hide/delete/restore`, and DM events (`dm.thread.created`, `dm.message.created`, `dm.message.read`) so moderation telemetry, analytics, and notification pipelines can observe chat traffic, reaction trends, and read receipt behaviour across community channels and direct messages.
- Social graph workflows emit `social.follow.requested/accepted/declined/removed`, `social.block.applied/removed`, and `social.privacy.updated` domain events, plus corresponding audit log rows, so analytics, moderation, and compliance tooling can monitor relationship changes, block enforcement, and privacy mutations in real time.
