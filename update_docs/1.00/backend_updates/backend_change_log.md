# Backend Change Log – Version 1.00

- Hardened the event outbox by pairing `DomainEventModel` with a dedicated dispatch queue, worker integration, and resilience controls (retry, jitter, recovery) to meet SLA expectations for automation flows promised in 1.00.
- Introduced a durable domain event dead-letter store with a migration, model helpers, dispatcher integration, and instrumentation so terminal failures are captured for on-call remediation without silently disappearing. 【F:backend-nodejs/migrations/20250318121500_domain_event_dead_letters.js†L1-L55】【F:backend-nodejs/src/models/DomainEventDeadLetterModel.js†L1-L128】【F:backend-nodejs/src/services/DomainEventDispatcherService.js†L1-L247】
- Delivered a tenant-aware feature flag governance stack with manifest-driven defaults, bootstrap synchronisation, and admin tooling so operators can evaluate, audit, and override capabilities without engineering interventions.
- Introduced production-grade third-party integration wrappers covering Stripe, PayPal, CloudConvert, and Twilio with sandbox credential routing, Redis-backed circuit breakers, retry/backoff orchestration, webhook idempotency storage, and operational metrics to harden partner workflows.
- Centralised compliance telemetry by introducing an audit event service that encrypts IP evidence, enforces metadata retention budgets, and exposes a single interface for background jobs and controllers to emit SOC2-ready trails.
- Extended the compliance analytics surface with attestation roll-ups, archive discovery, and risk heatmap generation powering the operator dashboard’s compliance snapshot, ensuring policy, incident, and evidence metrics stay in sync across tenants.
- Finalised the instructor dashboard workspace API by layering course, cohort, assignment, authoring, and learner aggregation
  logic behind lazily-imported course models, ensuring `DashboardService.getDashboardForUser` returns a full `coursesWorkspace`
  envelope without incurring database overhead for instructors that have not yet launched a programme.
- Added an observability SLO registry, HTTP exposure layer, and Prometheus-aware middleware so operators receive real-time error budget burn alerts and latency summaries without shipping bespoke dashboards.
- Delivered an environment parity service and `/environment/health` endpoint that assembles Terraform/Docker manifest fingerprints, runs dependency probes, and surfaces drift status to admins, giving release managers a deterministic parity report before promoting builds. 【F:backend-nodejs/src/services/EnvironmentParityService.js†L1-L217】【F:backend-nodejs/src/controllers/EnvironmentParityController.js†L1-L13】【F:backend-nodejs/src/routes/environmentParity.routes.js†L1-L9】
- Introduced a security operations domain with MySQL migrations, repository layer, service orchestration, and admin-only routes powering the risk register, audit evidence lifecycle, continuity drills, and assessment scheduling so compliance teams can manage enterprise risk posture directly from the platform. 【F:backend-nodejs/migrations/20241122120000_security_compliance_risk_operations.js†L1-L213】【F:backend-nodejs/src/repositories/SecurityOperationsRepository.js†L1-L452】【F:backend-nodejs/src/services/SecurityOperationsService.js†L1-L421】【F:backend-nodejs/src/controllers/SecurityOperationsController.js†L1-L199】【F:backend-nodejs/src/routes/security.routes.js†L1-L17】
- Established a telemetry domain with consent ledger, event, batch, freshness, and lineage tables plus ingestion/export services, telemetry APIs, and a warehouse scheduler so governed event streams flow into analytics and compliance tooling automatically. 【F:backend-nodejs/src/database/domains/telemetry.js†L1-L199】【F:backend-nodejs/src/services/TelemetryIngestionService.js†L1-L173】【F:backend-nodejs/src/services/TelemetryWarehouseService.js†L1-L197】【F:backend-nodejs/src/controllers/TelemetryController.js†L1-L115】【F:backend-nodejs/src/jobs/telemetryWarehouseJob.js†L1-L121】
- Rolled out an executive business intelligence module with dedicated reporting view models, a service/controller orchestration layer, and secure analytics routes documented in OpenAPI so operators can retrieve daily enrollment, engagement, and revenue KPIs from production data marts. 【F:backend-nodejs/src/models/ReportingCourseEnrollmentDailyView.js†L1-L104】【F:backend-nodejs/src/models/ReportingCommunityEngagementDailyView.js†L1-L94】【F:backend-nodejs/src/models/ReportingPaymentsRevenueDailyView.js†L1-L76】【F:backend-nodejs/src/services/BusinessIntelligenceService.js†L1-L265】【F:backend-nodejs/src/controllers/BusinessIntelligenceController.js†L1-L26】【F:backend-nodejs/src/routes/analytics.routes.js†L1-L12】【F:backend-nodejs/src/docs/openapi.json†L8800-L9560】

- Advanced the monetisation finance stack with tenant discovery helpers, DB-aware metadata scoping, shared revenue schedule hydration, and a multi-tenant reconciliation job so finance operations can reconcile catalog, usage, and payment intent data per tenant with envelope-aligned admin APIs and targeted test coverage.
- Hardened monetisation tenant attribution by extracting cross-dialect JSON scope builders into a reusable database utility, wiring MonetizationFinanceService to the helper, and adding Vitest coverage to lock the MySQL, PostgreSQL, and SQLite query shapes in place. 【F:backend-nodejs/src/database/utils/tenantMetadataScope.js†L1-L48】【F:backend-nodejs/src/services/MonetizationFinanceService.js†L9-L13】【F:backend-nodejs/test/tenantMetadataScope.test.js†L1-L63】
- Extended monetisation refund handling to reverse recognised revenue, shrink deferred schedules, emit dedicated ledger entries, and surface Prometheus counters so GAAP variance stays within tolerance even after partial refunds. 【F:backend-nodejs/src/services/MonetizationFinanceService.js†L1-L613】【F:backend-nodejs/src/models/MonetizationRevenueScheduleModel.js†L1-L216】【F:backend-nodejs/src/services/PaymentService.js†L1039-L1384】【F:backend-nodejs/src/observability/metrics.js†L120-L206】【F:backend-nodejs/test/monetizationFinanceService.test.js†L1-L266】
- Delivered an enablement knowledge base API by wiring the new content service, admin controller, and `/enablement` routes that render curated Markdown guides, expose search/filter metadata, surface capability matrices, and provide reindex hooks for LMS/portal automation. 【F:backend-nodejs/src/services/EnablementContentService.js†L1-L357】【F:backend-nodejs/src/controllers/EnablementController.js†L1-L78】【F:backend-nodejs/src/routes/enablement.routes.js†L1-L11】【F:backend-nodejs/src/docs/openapi.json†L9050-L9225】
- Added a governance and stakeholder communications layer with dedicated migrations, models, metrics instrumentation, service orchestration, controller, routes, seeds, tests, and OpenAPI coverage so programme owners can track contract renewals, vendor risk, cross-functional reviews, and roadmap communications from production APIs. 【F:backend-nodejs/migrations/20250305110000_governance_stakeholder_operations.js†L1-L164】【F:backend-nodejs/src/services/GovernanceStakeholderService.js†L1-L212】【F:backend-nodejs/src/controllers/GovernanceController.js†L1-L164】【F:backend-nodejs/src/routes/governance.routes.js†L1-L21】【F:backend-nodejs/test/governanceStakeholderService.test.js†L1-L167】【F:backend-nodejs/test/governanceHttpRoutes.test.js†L1-L120】【F:backend-nodejs/src/docs/openapi.json†L1-L9999】
- Delivered release readiness orchestration with MySQL migrations, seeded checklists, metrics instrumentation, service orchestration, controller/route layer, and OpenAPI documentation so release managers can automate checklist governance, gate evaluations, and deployment dashboards from production APIs. 【F:backend-nodejs/migrations/20250305113000_release_management.js†L1-L96】【F:backend-nodejs/seeds/001_bootstrap.js†L3487-L3672】【F:backend-nodejs/src/services/ReleaseOrchestrationService.js†L1-L461】【F:backend-nodejs/src/controllers/ReleaseManagementController.js†L1-L139】【F:backend-nodejs/src/routes/release.routes.js†L1-L13】【F:backend-nodejs/src/observability/metrics.js†L202-L330】【F:backend-nodejs/src/observability/metrics.js†L815-L858】【F:backend-nodejs/src/docs/openapi.json†L22690-L23125】
