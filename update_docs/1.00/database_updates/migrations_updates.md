# Migration Updates

- Added `backend-nodejs/migrations/20241020130000_content_assets.js` to create content asset lifecycle tables with cascade rules and indexes.
- Migration includes safeguards to create tables conditionally (`hasTable`) to support incremental adoption and idempotent deployments.
- Added `backend-nodejs/migrations/20241105153000_data_hygiene.js` introducing retention policy/audit tables, owner membership triggers, and soft-delete support with `DROP TRIGGER IF EXISTS` guards for repeatable deployments.
- Added `backend-nodejs/migrations/20241107101500_feature_flags_and_runtime_config.js` establishing feature flag, audit, and configuration tables with seed data for staged rollouts.
- Added `20241112123000_course_modules_and_drip_engine.js` creating `courses`, `course_modules`, `course_lessons`, `course_assignments`, `course_enrollments`, and `course_progress` tables with release metadata, drip offsets, prerequisite links, and grading fields to support the course module & drip engine.
- Added `20241115131500_ebook_experience_upgrade.js` creating `ebooks`, `ebook_chapters`, `ebook_highlights`, `ebook_bookmarks`, `ebook_reader_settings`, and `ebook_watermark_events` with referential integrity, JSON metadata columns, download-limit defaults, and author/status indexes to support the new ebook authoring and DRM telemetry flows.
- Added `20241118103000_live_classroom_and_tutor_hire.js` creating tutor profile, availability, booking, live classroom, registration, and chat session tables with cascade rules, availability overlap safeguards, seat limit defaults, and telemetry columns (`last_attendance_at`, `minutes_streamed`) to support the live classroom and tutor hire services.
- Added `20241119150000_ads_intelligence.js` establishing ads campaign, creative, placement, targeting segment, budget pacing, spend, and performance metric tables with unique constraints and materialised aggregates ready for explorer targeting and reporting pipelines.
- Added `20241127120000_admin_customer_service_panels.js` provisioning support ticket, ticket event, incident report, admin review request, and policy document tables with enum constraints, SLA timestamps, CSAT/metadata JSON columns, cascading foreign keys, and composite indexes so admin/customer support consoles can execute queue analytics without compromising query performance.
